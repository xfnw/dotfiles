#!/usr/bin/env python3

import sys, re

PATTERN = re.compile(r"^([^\t ]+)[\t ]+(?:[0-9]+[\t ]+)?IN[\t ]+(A|AAAA|CNAME)[\t ]+([^\t ]+)$")

addresses = {}
aliases = {}

for line in sys.stdin.readlines():
    line = line.strip()
    if match := PATTERN.match(line):
        (dom, kind, val) = match.groups()
        match kind:
            case "A" | "AAAA":
                addresses.setdefault(val, set()).add(dom)
            case "CNAME":
                aliases.setdefault(val, set()).add(dom)

for a, m in addresses.items():
    cat = m.union({h for i in m for h in aliases.get(i, set())})
    print(a + "\t" + " ".join(map(lambda d: d.rstrip("."), cat)))

